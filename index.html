<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>小粥是个大笨蛋</title>
    <style>
        :root {
            --bg: #fff5f7;
            --fg: #1f2937;
            --accent: #ef4444;
            --accent-2: #fca5a5;
            --btn: #111827;
            --btn-t: #ffffff;
            --btn-ghost: #ffffff;
            --shadow: 0 10px 25px rgba(0, 0, 0, .08);
            --radius: 1.25rem;
        }

        * {
            box-sizing: border-box
        }

        html,
        body {
            height: 100%
        }

        body {
            margin: 0;
            font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Noto Sans, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
            color: var(--fg);
            background: radial-gradient(1000px 600px at 20% -10%, #ffe4e6 0%, transparent 60%),
                radial-gradient(1200px 800px at 120% 10%, #ffe4e6 0%, transparent 60%),
                var(--bg);
            overflow: hidden;
        }

        .wrap {
            position: relative;
            height: 100%;
            width: 100%;
            display: grid;
            place-items: center;
            padding: 24px;
        }

        .card {
            position: relative;
            width: min(680px, 92vw);
            background: #fff;
            border-radius: var(--radius);
            padding: clamp(24px, 4vw, 40px);
            box-shadow: var(--shadow);
            text-align: center;
        }

        .heart {
            width: 72px;
            height: 72px;
            display: inline-grid;
            place-items: center;
            margin: 0 auto 8px;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, #fecaca 0 30%, #ef4444 70% 100%);
            color: #fff;
            font-size: 34px;
            box-shadow: 0 8px 20px rgba(239, 68, 68, .35);
            animation: float 3.6s ease-in-out infinite;
            user-select: none;
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0)
            }

            50% {
                transform: translateY(-8px)
            }
        }

        h1 {
            font-size: clamp(24px, 4.5vw, 40px);
            line-height: 1.1;
            margin: 8px 0 18px
        }

        p.sub {
            opacity: .7;
            margin: -4px 0 22px;
            font-size: 14px
        }

        .btns {
            display: flex;
            gap: 12px;
            justify-content: center;
            flex-wrap: wrap
        }

        button {
            appearance: none;
            border: 0;
            cursor: pointer;
            border-radius: 999px;
            padding: 12px 22px;
            font-weight: 700;
            font-size: 16px;
            transition: transform .12s ease, box-shadow .2s ease, background .2s ease, color .2s ease;
        }

        .yes {
            background: var(--accent);
            color: var(--btn-t);
            box-shadow: 0 8px 18px rgba(239, 68, 68, .25)
        }

        .yes:hover {
            transform: translateY(-1px)
        }

        .no {
            background: var(--btn-ghost);
            color: var(--fg);
            border: 1px solid #e5e7eb
        }

        .links {
            position: fixed;
            left: 16px;
            bottom: 16px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            font-size: 14px
        }

        .links a {
            background: #fff;
            border: 1px solid #e5e7eb;
            color: #111827;
            text-decoration: none;
            padding: 8px 12px;
            border-radius: 999px;
            box-shadow: var(--shadow)
        }

        /* modal */
        .modal {
            position: fixed;
            inset: 0;
            display: none;
            place-items: center;
            background: rgba(17, 24, 39, .55);
            backdrop-filter: saturate(120%) blur(3px);
            z-index: 50;
        }

        .modal.show {
            display: grid
        }

        .modal-card {
            background: #fff;
            width: min(560px, 92vw);
            border-radius: var(--radius);
            padding: 28px;
            text-align: center;
            box-shadow: var(--shadow)
        }

        .modal-card h2 {
            margin: 0 0 8px;
            font-size: 28px
        }

        .modal-card p {
            margin: 0 0 18px;
            opacity: .8
        }

        /* the naughty move area */
        .playground {
            position: absolute;
            inset: 0;
            pointer-events: none
        }

        .no-holder {
            position: absolute;
            min-width: 120px;
            pointer-events: auto
        }

        /* Canvas for confetti */
        canvas#confetti {
            position: fixed;
            inset: 0;
            pointer-events: none
        }

        @media (max-width:480px) {
            .heart {
                width: 64px;
                height: 64px;
                font-size: 30px
            }

            .no {
                padding: 10px 18px
            }
        }
    </style>
</head>

<body>
    <canvas id="confetti"></canvas>
    <div class="wrap" id="wrap">
        <div class="card">
            <div class="heart" aria-hidden="true">❤</div>
            <h1>小粥是个大笨蛋</h1>
            <p class="sub">嘻嘻嘻</p>
            <div class="btns">
                <button class="yes" id="yesBtn">同意</button>
                <button class="no" id="noBtn">不同意</button>
            </div>
        </div>

        <!-- absolutely-positioned holder so the “不要”能乱跑 -->
        <div class="playground" aria-hidden="true">
            <div class="no-holder" id="noHolder" style="left:50%; top:55%"></div>
        </div>
    </div>

    <!-- 成功弹窗 -->
    <div class="modal" id="okModal" role="dialog" aria-modal="true" aria-labelledby="okTitle">
        <div class="modal-card">
            <h2 id="okTitle">好耶！</h2>
            <p>好吧其实小粥是个天才。祝你每天都开开心心。</p>
            <button class="yes" id="closeModal">好的</button>
        </div>
    </div>

    <script>
        const wrap = document.getElementById('wrap');
        const noBtn = document.getElementById('noBtn');
        const yesBtn = document.getElementById('yesBtn');
        const noHolder = document.getElementById('noHolder');
        const modal = document.getElementById('okModal');
        const closeModal = document.getElementById('closeModal');

        // 视口修正：使用 --vh 解决移动端地址栏导致的 100vh 抖动
        function setVH() {
            const vh = window.innerHeight * 0.01;
            document.documentElement.style.setProperty('--vh', `${vh}px`);
            document.getElementById('wrap').style.minHeight = `calc(var(--vh, 1vh) * 100)`;
        }
        setVH();
        window.addEventListener('resize', setVH, { passive: true });

        // 初始把“不要”放到按钮位置（视觉上不变，但能被我们移动）
        function placeNoHolderOverButton() {
            const rect = noBtn.getBoundingClientRect();
            noHolder.style.left = rect.left + window.scrollX + 'px';
            noHolder.style.top = rect.top + window.scrollY + 'px';
        }
        placeNoHolderOverButton();
        window.addEventListener('resize', placeNoHolderOverButton);

        // 让“不要”逃跑
        function moveNoAway() {
            const pad = 16; // 离边界安全距离
            const btnW = noBtn.offsetWidth || 100;
            const btnH = noBtn.offsetHeight || 44;
            const maxX = window.innerWidth - btnW - pad;
            const maxY = window.innerHeight - btnH - pad;
            let nx = Math.random() * maxX + pad / 2;
            let ny = Math.random() * maxY + pad / 2;

            // 如果离“可以”太近，稍微远一点（避免重叠）
            const yRect = yesBtn.getBoundingClientRect();
            const tooClose = Math.hypot(nx - yRect.left, ny - yRect.top) < 160;
            if (tooClose) { nx = Math.min(maxX, yRect.left + 200); ny = Math.min(maxY, yRect.top + 200); }

            noHolder.style.transform = `translate(${nx - noHolder.offsetLeft}px, ${ny - noHolder.offsetTop}px)`;
            // 把按钮放进 holder，随着 holder 一起走
            if (!noHolder.contains(noBtn)) noHolder.appendChild(noBtn);
        }

        // 桌面：鼠标靠近/悬停就跑
        noBtn.addEventListener('mouseenter', moveNoAway);
        // 移动端：手指触碰就跑
        noBtn.addEventListener('touchstart', (e) => { e.preventDefault(); moveNoAway(); }, { passive: false });

        // 点击“可以”：弹窗 + 撒花
        yesBtn.addEventListener('click', () => {
            try { (document.documentElement.requestFullscreen || document.documentElement.webkitRequestFullscreen || document.documentElement.msRequestFullscreen)?.call(document.documentElement); } catch (e) { };
            modal.classList.add('show');
            confettiBurst();
        });
        closeModal.addEventListener('click', () => modal.classList.remove('show'));
        modal.addEventListener('click', (e) => { if (e.target === modal) modal.classList.remove('show'); });

        // 简易彩带动画（纯原生，无依赖）
        const cv = document.getElementById('confetti');
        const ctx = cv.getContext('2d');
        let confetti = [];
        function resizeCanvas() { cv.width = window.innerWidth; cv.height = window.innerHeight; }
        window.addEventListener('resize', resizeCanvas); resizeCanvas();

        function confettiBurst() {
            const COLORS = ['#ef4444', '#f59e0b', '#10b981', '#3b82f6', '#a855f7', '#ec4899'];
            for (let i = 0; i < 160; i++) {
                confetti.push({
                    x: Math.random() * cv.width,
                    y: -10,
                    vx: (Math.random() - 0.5) * 4,
                    vy: Math.random() * 3 + 2,
                    size: Math.random() * 6 + 4,
                    rot: Math.random() * Math.PI,
                    vr: (Math.random() - 0.5) * 0.3,
                    color: COLORS[(Math.random() * COLORS.length) | 0],
                    shape: Math.random() < 0.5 ? 'rect' : 'circle'
                });
            }
        }

        function tick() {
            ctx.clearRect(0, 0, cv.width, cv.height);
            confetti.forEach(p => {
                p.x += p.vx; p.y += p.vy; p.vy += 0.04; p.rot += p.vr;
                // 重生
                if (p.y > cv.height + 20) { p.y = -10; p.vy = Math.random() * 3 + 2; }
                ctx.save(); ctx.translate(p.x, p.y); ctx.rotate(p.rot); ctx.fillStyle = p.color;
                if (p.shape === 'rect') { ctx.fillRect(-p.size / 2, -p.size / 2, p.size, p.size / 2); }
                else { ctx.beginPath(); ctx.arc(0, 0, p.size / 2, 0, Math.PI * 2); ctx.fill(); }
                ctx.restore();
            });
            requestAnimationFrame(tick);
        }
        tick();
    </script>
</body>

</html>